<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WhatsApp Clone</title>

<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Arial;background:#ece5dd}
.container{display:flex;height:100vh}

/* SIDEBAR */
.sidebar{width:280px;background:#075e54;color:#fff}
.sidebar h2{padding:20px;text-align:center}
.contact{display:flex;align-items:center;padding:10px 20px;cursor:pointer}
.contact img{width:40px;height:40px;border-radius:50%;margin-right:10px}
.contact:hover{background:#128c7e}

/* CHAT */
.chat{flex:1;display:flex;flex-direction:column;background:#dadada}
.chat-header{
padding:10px 15px;
background:#ededed;
display:flex;
align-items:center;
gap:10px;
}
.back{display:none;cursor:pointer;font-size:18px}
.status{font-size:12px;color:green;margin-top:2px}

.messages{
flex:1;
padding:15px;
overflow-y:auto;
display:flex;
flex-direction:column;
}

.message-container{display:flex;margin-bottom:10px;align-items:flex-end}
.message{max-width:75%;padding:10px;border-radius:8px}
.sent{background:#dcf8c6}
.received{background:#fff}
.avatar{width:32px;height:32px;border-radius:50%;margin:0 8px}
.time{font-size:10px;color:gray;display:block;text-align:right}

/* INPUT */
.input-area{
display:flex;
gap:5px;
padding:8px;
background:#f0f0f0;
align-items:center;
}
.input-area input[type=text]{
flex:1;
padding:10px;
border-radius:20px;
border:1px solid #ccc;
}
.input-area button{
width:38px;
height:38px;
border:none;
border-radius:50%;
cursor:pointer;
font-size:16px;
}
.send{background:#25d366;color:#fff}

/* DARK MODE */
.dark body{background:#111}
.dark .sidebar{background:#1f2c33}
.dark .chat{background:#0b141a}
.dark .chat-header{background:#1f2c33;color:#fff}
.dark .received{background:#1f2c33;color:#fff}
.dark .sent{background:#005c4b;color:#fff}
.dark .input-area{background:#1f2c33}
.dark input,.dark select{background:#2a3942;color:#fff;border:none}

/* MOBILE */
@media(max-width:768px){
.container{flex-direction:column}
.sidebar{width:100%;height:100vh}
.chat{display:none;height:100vh}
.chat.active{display:flex}
.sidebar.hide{display:none}
.back{display:block}
}
</style>
</head>

<body>

<div class="container">

<div class="sidebar" id="sidebar">
<h2>WhatsApp</h2>

<div class="contact" onclick="openChat('–ù—É—Ä–≥–∏—Å–∞')">
<img src="file:///C:/Users/PC306.9/Downloads/6357ee3a7e5e16b8a058278e9efaa869.jpeg">–ù—É—Ä–≥–∏—Å–∞
</div>

<div class="contact" onclick="openChat('–£–ª—ã–∫–±–µ–∫')">
<img src="file:///C:/Users/PC306.9/Downloads/0f317c62e0adf92d8e45cc270b503b75%20(1).jpg">–£–ª—ã–∫–±–µ–∫
</div>

<div class="contact" onclick="openChat('–ñ–∞—Ä–∞—Å')">
<img src="file:///C:/Users/PC306.9/Downloads/close-up-portrait-tiger_1048944-9140467.avif">–ñ–∞—Ä–∞—Å
</div>
</div>

<div class="chat" id="chat">
<div class="chat-header">
<span class="back" onclick="goBack()">‚¨Ö</span>

<div>
<b id="chatName">–ß–∞—Ç</b><br>
<span class="status" id="status">–æ–Ω–ª–∞–π–Ω</span>
</div>

<div style="margin-left:auto;display:flex;gap:10px">
<button onclick="toggleDark()">üåô</button>
<button onclick="clearChat()">üóë</button>
</div>
</div>

<div class="messages" id="messages"></div>

<div class="input-area">
<select id="user">
<option value="me">–ú–µ–Ω</option>
<option value="friend">–ï–∫—ñ–Ω—à—ñ</option>
<option value="third">“Æ—à—ñ–Ω—à—ñ</option>
</select>

<input type="text" id="text" placeholder="–•–∞–±–∞—Ä–ª–∞–º–∞..."
onkeypress="if(event.key==='Enter')sendText()" oninput="typing()">

<input type="file" id="file" accept="image/*" hidden>

<button onclick="file.click()">üìé</button>
<button onclick="sendLocation()">üìç</button>
<button onclick="recordVoice()">üé§</button>
<button onclick="addEmoji()">üòä</button>
<button class="send" onclick="sendText()">‚û§</button>
</div>
</div>

</div>

<script>
let chatNameEl=document.getElementById("chatName");
let messages=document.getElementById("messages");
let sidebar=document.getElementById("sidebar");
let chatBox=document.getElementById("chat");
let currentChat=null;
let mediaRecorder,chunks=[];
let typingTimer=null;

const avatars={
me:"file:///C:/Users/PC306.9/Downloads/close-up-portrait-tiger_1048944-9140467.avif",
friend:"file:///C:/Users/PC306.9/Downloads/0f317c62e0adf92d8e45cc270b503b75%20(1).jpg",
third:"file:///C:/Users/PC306.9/Downloads/6357ee3a7e5e16b8a058278e9efaa869.jpeg"
};

function openChat(name){
currentChat=name;
chatNameEl.innerText=name;
messages.innerHTML=localStorage.getItem("chat_"+name)||"";
status.innerText="–æ–Ω–ª–∞–π–Ω";
if(typingTimer) clearTimeout(typingTimer);
sidebar.classList.add("hide");
chatBox.classList.add("active");
}

function goBack(){
chatBox.classList.remove("active");
sidebar.classList.remove("hide");
}

function addMessage(html,user){
let box=document.createElement("div");
box.className="message-container";
let msg=document.createElement("div");
msg.className="message "+(user==="me"?"sent":"received");
msg.innerHTML=html+`<span class="time">${new Date().toLocaleTimeString().slice(0,5)} ‚úì‚úì</span>`;
let av=document.createElement("img");
av.src=avatars[user];
av.className="avatar";
user==="me"?box.append(msg,av):box.append(av,msg);
messages.appendChild(box);
localStorage.setItem("chat_"+currentChat,messages.innerHTML);
messages.scrollTop=messages.scrollHeight;
}

function sendText(){
if(!currentChat||!text.value.trim())return;
addMessage(text.value,user.value);
text.value="";
}

file.onchange=()=>{
let r=new FileReader();
r.onload=e=>addMessage(`<img src="${e.target.result}" style="max-width:200px">`,user.value);
r.readAsDataURL(file.files[0]);
}

function sendLocation(){
navigator.geolocation.getCurrentPosition(p=>{
addMessage(`<a target="_blank" href="https://maps.google.com/?q=${p.coords.latitude},${p.coords.longitude}">üìç –õ–æ–∫–∞—Ü–∏—è</a>`,user.value);
});
}

function recordVoice(){
navigator.mediaDevices.getUserMedia({audio:true}).then(s=>{
mediaRecorder=new MediaRecorder(s);
mediaRecorder.start();
chunks=[];
mediaRecorder.ondataavailable=e=>chunks.push(e.data);
setTimeout(()=>mediaRecorder.stop(),3000);
mediaRecorder.onstop=()=>{
let blob=new Blob(chunks,{type:"audio/ogg"});
let url=URL.createObjectURL(blob);
addMessage(`<audio controls src="${url}"></audio>`,user.value);
};
});
}

function addEmoji(){ text.value+="üòä"; }

function typing(){
let u=user.value;
if(u==="me") return;
status.innerText=u==="friend"
?"–ï–∫—ñ–Ω—à—ñ –∞–¥–∞–º –∂–∞–∑—ã–ø –∂–∞—Ç—ã—Ä..."
:"“Æ—à—ñ–Ω—à—ñ –∞–¥–∞–º –∂–∞–∑—ã–ø –∂–∞—Ç—ã—Ä...";
if(typingTimer) clearTimeout(typingTimer);
typingTimer=setTimeout(()=>status.innerText="–æ–Ω–ª–∞–π–Ω",1500);
}

function toggleDark(){
document.documentElement.classList.toggle("dark");
}

function clearChat(){
if(!currentChat) return;
if(confirm("–ß–∞—Ç—Ç—ã —Ç–æ–ª—ã“õ ”©—à—ñ—Ä–µ—Å—ñ“£ –±–µ?")){
localStorage.removeItem("chat_"+currentChat);
messages.innerHTML="";
status.innerText="–æ–Ω–ª–∞–π–Ω";
}
}
</script>

</body>
</html>
